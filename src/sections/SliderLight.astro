---
import { Image } from "astro:assets";
import Analytics from "../assets/images/analytics-graphic.jpg";
import Google from "../assets/images/google-result.jpg";
import SearchConsole from "../assets/images/search-console-google.jpg";
---

<style lang="scss">
    .slider-light {
        background-color: #F3F3F3;
        margin: 0px 0.8rem;
        border: 1px solid #C6C6C6;
        margin-top: 6.4rem;

        border-radius: 0.8rem;


        overflow: hidden;

        hr {
            border: 0.5px solid #C6C6C6;
        }

        .slider-light-head {
            padding: 1.6rem 1.6rem;
            display: flex;
            justify-content: space-between;

            h2 {
                font-size: 2.4rem;
                line-height: 3.2rem;
                display: flex;
                gap: 0.8rem;
                letter-spacing: -0.5px;
                color: #3A3A3A;

                span {
                    font-family: "spline-sans-mono";
                    color: #eb443a;
                    font-size: 2.4rem;
                    line-height: 3.2rem;
                }
            }
        }

        .slider-light-intro {
            margin: 0 0.8rem;
            margin: 3.2rem 1.6rem;

            h2 {
                font-size: 4rem;
                color: #151515;
            }
        }

        .slider-light-content {
            margin: 0 0.8rem;

            .slider {
                max-width: 144rem;
                margin: 0 auto;
                margin-bottom: 3.2rem;

                .my-slider-progress {
                    background: #ccc;
                    margin: 0 auto;
                    margin-top: 2.4rem;
                    width: 90%;
                }

                .my-slider-progress-bar {
                    background: #eb443a;
                    height: 2px;
                    transition: width 400ms ease;
                    width: 0;
                }

                .splide__track{
                    overflow: visible;
                }

                li.splide__slide {
                    aspect-ratio: 8/5;
                }
                img {
                    width: 100%;
                    height: 100%;

                    border-radius: 0.8rem;
                }
            }

            .text {
                display: flex;
                flex-direction: column;
                gap: 3.2rem;
                padding-bottom: 6.4rem;

                p {
                    color: #6B6B6B;
                }
            }
        }
    }

    @media screen and (min-width: 600px) {
        .slider-light {
            margin: 0 1rem;
            margin-top: 6.4rem;
            .slider-light-content {
                .text {
                    flex-direction: row;
                    max-width: 880px;
                    margin: 0 auto;
                }
            }
        }
    }

    @media screen and (min-width: 900px) {
        .slider-light {
            margin: 0 2.4rem;
            margin-top: 6.4rem;
            .slider-light-intro {
                position: relative;
                margin: 9.6rem 4.6rem;

                h2 {
                    margin-top: 9.6rem;
                    font-size: 6.4rem;
                    width: max-content;
                    margin-left: auto;
                    margin-right: auto;
                    width: 880px;
                }
            }

            .slider-light-content {
                .slider {
                    width: 60vw;// TAMAÃ‘O DEL SLIDER EN DESKTOP
                    max-width: 128rem;
                }
            }
        }
    }
</style>

<div class="slider-light">
    <div class="slider-light-head">
        <h2><span>03</span>SEO & Ads</h2>
    </div>
    <hr />

    <div class="slider-light-intro">
        <h2>Expand your visibility & aim for the right audience</h2>
    </div>

    <div class="slider-light-content">
        <div class="slider">
            <div class="splide light-slider">
                <div class="splide__track">
                    <ul class="splide__list">
                        <li class="splide__slide">
                            <Image src={Analytics} alt="Analytics"/>
                        </li>
                        <li class="splide__slide">
                            <Image src={Google} alt="Google"/>
                        </li>
                        <li class="splide__slide">
                            <Image src={SearchConsole} alt="Search Console Google"/>
                        </li>
                    </ul>
                </div>

                <!-- Add the progress bar element -->
                <div class="my-slider-progress">
                    <div class="my-slider-progress-bar light-progress-bar"></div>
                </div>
            </div>
        </div>

        <div class="text">
            <p>
                We know that when it comes to SEO, one strategy doesn't fit all. We analyze your company's needs, industry, current SEO performance, and goals to craft a customized SEO strategy tailored specifically for your business.
            </p>

            <p>
                Get the most of our lead generation services and expand your brand through social media content creation and Ads campaigns to increase both conversions and revenue for your company
            </p>
        </div>
    </div>
</div>

<script>
    // import { Splide } from "./../../public/splide-4.1.3";

    var splide1 = new Splide(".splide.light-slider", {
        type: "loop",
        arrows: false,
        pagination: false,
        autoplay: true,
        lazyload: true,
        rewind: true,
        interval: 4000,
        speed: 2000,
        padding: "5rem",
        gap: "2.4rem",
        focus: "center"
    });
    const bar = splide1.root.querySelector(
        ".my-slider-progress-bar.light-progress-bar",
    ) as HTMLElement;

    // Updates the bar width whenever the carousel moves:
    splide1.on("mounted move", function () {
        var end = splide1.Components.Controller.getEnd() + 1;
        var rate = Math.min((splide1.index + 1) / end, 1);
        bar.style.width = String(100 * rate) + "%";
    });

    splide1.mount();
</script>
